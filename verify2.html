<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Verify</title>

<style>
  body {
    background: #111;
    color: #eee;
    font-family: Arial, sans-serif;
    margin: 0;
    padding: 0;
    text-align: center;
  }

  /* Camera circle */
  #camera-circle {
    width: min(80vw, 300px);
    height: min(80vw, 300px);
    border-radius: 50%;
    border: 4px solid #555;
    overflow: hidden;
    margin: 40px auto 20px;
    background: #000;
    position: relative;
  }

  video, canvas {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }

  /* Loading bar */
  #loader-container {
    width: 80%;
    max-width: 400px;
    height: 20px;
    background: #222;
    border: 2px solid #555;
    border-radius: 10px;
    margin: 30px auto;
    overflow: hidden;
  }

  #loader-bar {
    width: 0%;
    height: 100%;
    background: linear-gradient(90deg, #2ecc71, #27ae60);
    transition: width 0.1s linear;
  }

  #message {
    font-size: 22px;
    margin-top: 20px;
  }

  button {
    margin-top: 20px;
    padding: 12px 24px;
    font-size: 16px;
    cursor: pointer;
    border-radius: 8px;
    border: none;
    background: #3498db;
    color: white;
  }
</style>
</head>

<body>

<h1>Verify</h1>

<p>This is AI face Verfication to check your age. Press the button to continue. If you do not press the button, then you will automaticly be denied service.</p>
<p>If the AI guesses wrong, refresh the page.</p>

<div id="camera-circle">
  <video id="video" autoplay playsinline></video>
  <canvas id="canvas" hidden></canvas>
</div>

<button onclick="takePhoto()">Take Photo</button>

<div id="loader-container" hidden>
  <div id="loader-bar"></div>
</div>

<div id="message"></div>

<script>
  const video = document.getElementById("video");
  const canvas = document.getElementById("canvas");
  const loader = document.getElementById("loader-container");
  const bar = document.getElementById("loader-bar");
  const message = document.getElementById("message");

  // Ask for camera permission
  navigator.mediaDevices.getUserMedia({ video: true })
    .then(stream => {
      video.srcObject = stream;
    })
    .catch(() => {
      alert("Camera access denied.");
    });

  function takePhoto() {
    const ctx = canvas.getContext("2d");
    canvas.width = video.videoWidth;
    canvas.height = video.videoHeight;

    ctx.drawImage(video, 0, 0);
    video.hidden = true;
    canvas.hidden = false;

    startLoading();
  }

  function startLoading() {
    loader.hidden = false;
    let progress = 0;

    const interval = setInterval(() => {
      progress += 1;
      bar.style.width = progress + "%";

      if (progress >= 100) {
        clearInterval(interval);
        showMessage();
      }
    }, 100); // 100ms Ã— 100 = 10 seconds
  }

  function showMessage() {
    const texts = [
      "AI guessed age 15-16. You are too young to use this AI.",
      "AI guessed age 65+. Please use a different AI, you are too old."
    ];

    message.textContent = texts[Math.floor(Math.random() * texts.length)];
  }
</script>

</body>
</html>
